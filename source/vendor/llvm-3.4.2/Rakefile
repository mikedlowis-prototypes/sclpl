require 'rake'
require 'fileutils'


GENERATOR   = "\"Unix Makefiles\""
SOURCE_ROOT = File.dirname(__FILE__)
BUILD_ROOT  = "#{SOURCE_ROOT}/../../../build/llvm"
MAKEFILE    = "#{BUILD_ROOT}/Makefile"

task :default => [MAKEFILE]

task :clean do
    FileUtils.rm_rf(BUILD_ROOT)
end

directory(BUILD_ROOT)
file MAKEFILE => [BUILD_ROOT] do
    FileUtils.cd(BUILD_ROOT) do
        sh "cmake -G#{GENERATOR} #{SOURCE_ROOT}"
    end
end
